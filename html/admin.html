<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>Aronyam Admin Paneli</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/Aronyam.com/css/admin.css">
</head>

<body>
    <div class="admin-container">

        <aside class="admin-sidebar">
            <div class="logo">Aronyam Admin</div>

            <button class="tab-btn active" data-tab="duyurular">Duyurular</button>
            <button class="tab-btn" data-tab="urunler">Ürünler</button>
        </aside>

        <main class="admin-main">

            <!-- DUYURULAR -->
            <section id="tab-duyurular" class="tab-content active">
                <h1>Duyurular Yönetimi</h1>

                <form id="duyuru-form" class="admin-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="duyuru-baslik">Başlık</label>
                            <input type="text" id="duyuru-baslik" required>
                        </div>

                        <div class="form-group">
                            <label for="duyuru-tarih">Tarih</label>
                            <input type="date" id="duyuru-tarih" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="duyuru-ozet">Özet</label>
                        <textarea id="duyuru-ozet" rows="3" required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="duyuru-resim">Resim yolu</label>
                            <input id="duyuru-resim" type="text" placeholder="images/duyuru-hasat.jpg">
                        </div>

                        <div class="form-group">
                            <label for="duyuru-link">Detay linki</label>
                            <input id="duyuru-link" type="text" placeholder="duyurular.html#hasat2025">
                        </div>
                    </div>

                    <button type="submit" class="primary-btn">Duyuru ekle</button>
                </form>

                <h2>Mevcut duyurular</h2>

                <div class="table-wrapper">
                    <table class="admin-table" id="duyuru-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tarih</th>
                                <th>Başlık</th>
                                <th>İşlem</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="json-output">
                    <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">
                        <h3 style="margin:0;">Güncel duyurular.json</h3>

                        <button id="download-duyurular" class="primary-btn" type="button"
                            style="padding:10px 14px; font-size:14px;">
                            JSON indir
                        </button>
                    </div>

                    <textarea id="duyuru-json" readonly title="Güncel duyurular JSON"
                        placeholder="Duyurular JSON burada görünecek."></textarea>
                </div>
            </section>

            <section id="tab-urunler" class="tab-content">
                <h1>Ürünler Yönetimi</h1>

                <form id="urun-form" class="admin-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="urun-ad">Ürün adı</label>
                            <input id="urun-ad" type="text" required>
                        </div>

                        <div class="form-group">
                            <label for="urun-kategori">Kategori</label>
                            <input id="urun-kategori" type="text" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="urun-fiyat">Fiyat (₺)</label>
                            <input id="urun-fiyat" type="number" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label for="urun-stok">Stok</label>
                            <input id="urun-stok" type="number" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="urun-puan">Puan</label>
                            <input id="urun-puan" type="number" step="0.1" value="0">
                        </div>

                        <div class="form-group">
                            <label for="urun-miktar">Miktar</label>
                            <input id="urun-miktar" type="text" placeholder="500 ml">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="urun-aciklama">Açıklama</label>
                        <textarea id="urun-aciklama" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="urun-resim">Resim URL</label>
                        <input id="urun-resim" type="text" required>
                    </div>

                    <div class="form-group">
                        <label for="urun-etiketler">Etiketler</label>
                        <input id="urun-etiketler" type="text" placeholder="örn: doğal, şekersiz, vegan">
                    </div>

                    <button type="submit" class="primary-btn">Ürün ekle</button>
                </form>

                <h2>Mevcut ürünler</h2>

                <div class="table-wrapper">
                    <table class="admin-table" id="urun-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Ad</th>
                                <th>Fiyat</th>
                                <th>Stok</th>
                                <th>İşlem</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div class="json-output">
                    <div style="display:flex; gap:10px; align-items:center; justify-content:space-between;">

                        <h3 style="margin:0;">Güncel products.json</h3>

                        <button id="download-urunler" class="primary-btn" type="button"
                            style="padding:10px 14px; font-size:14px;">
                            JSON indir
                        </button>
                    </div>

                    <textarea id="urun-json" readonly title="Güncel products JSON"
                        placeholder="Ürünler JSON burada görünecek."></textarea>
                </div>
            </section>

        </main>
    </div>


    <script src="/Aronyam.com/js/admin.js"></script>


    <script>
        function downloadJson(filename, text) {
            const blob = new Blob([text], { type: "application/json;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }

        document.addEventListener("DOMContentLoaded", () => {
            const dBtn = document.getElementById("download-duyurular");
            const uBtn = document.getElementById("download-urunler");

            if (dBtn) {
                dBtn.addEventListener("click", () => {
                    const val = document.getElementById("duyuru-json")?.value || "[]";
                    downloadJson("duyurular.json", val);
                });
            }

            if (uBtn) {
                uBtn.addEventListener("click", () => {
                    const val = document.getElementById("urun-json")?.value || "[]";
                    downloadJson("products.json", val);
                });
            }
        });
    </script>
</body>

</html>